plugins {
    id 'maven-publish'
    id 'dev.galasa.obr'         version '0.1.0-SNAPSHOT'
    id 'galasa.extensions'
}

description = 'Galasa Framework OBR'

def mavenrepo = System.getenv('MAVEN_REPO') ?: "https://nexus.galasa.dev/repository/maven-development"

dependencies {
    bundle ('dev.galasa:dev.galasa.cps.etcd:0.15.0-SNAPSHOT') { changing = true }
    bundle ('dev.galasa:dev.galasa.ras.couchdb:0.15.0-SNAPSHOT') { changing = true }
}


repositories {
    maven {
        url mavenrepo
    }
    mavenCentral()
}
    
publishing {
   publications {
        mavenObr(MavenPublication) {
            group = 'dev.galasa'
            version = '0.15.0-SNAPSHOT'
            from components.galasaobr
        }
    }
    repositories {
        maven {
            name = 'distRepo'
            url  = mavenrepo
            credentials {
                username System.getenv('MAVENUSERNAME')
                password System.getenv('MAVENPASSWORD')
            }
        }
    }
}
